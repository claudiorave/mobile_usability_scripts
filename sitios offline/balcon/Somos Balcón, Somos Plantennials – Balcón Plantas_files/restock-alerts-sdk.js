window.HengamRestock=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=36)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UrlUtils=e.StyleUtils=e.Logger=e.InjectionUtils=e.ElementsUtils=void 0;var o=n(14),i=n(4);e.ElementsUtils=i.default;var r=n(16);e.InjectionUtils=r.default;var s=n(3);e.Logger=s.default;var l=n(5);e.StyleUtils=l.default;var a=n(17);e.UrlUtils=a.default,e.default=o.default},function(t,e,n){"use strict";var o=n(6),i=Object.prototype.toString;function r(t){return"[object Array]"===i.call(t)}function s(t){return void 0===t}function l(t){return null!==t&&"object"==typeof t}function a(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function u(t){return"[object Function]"===i.call(t)}function c(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),r(t))for(var n=0,o=t.length;n<o;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:r,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:l,isPlainObject:a,isUndefined:s,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return l(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function t(){var e={};function n(n,o){a(e[o])&&a(n)?e[o]=t(e[o],n):a(n)?e[o]=t({},n):r(n)?e[o]=n.slice():e[o]=n}for(var o=0,i=arguments.length;o<i;o++)c(arguments[o],n);return e},extend:function(t,e,n){return c(e,(function(e,i){t[i]=n&&"function"==typeof e?o(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},function(t,e,n){t.exports=n(18)},function(t,e,n){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),r=((o={})[i.levels.DEBUG]="#0cd4a7",o[i.levels.INFO]="#6464f4",o[i.levels.WARN]="#ffc107",o[i.levels.ERROR]="#dc3545",o),s=function(){function t(t){this.isEnabled=!1,this.appName=t,i.setLevel(i.levels.INFO)}return t.prototype.enableLogs=function(){this.isEnabled=!0},t.prototype.debug=function(t){this.log(t,i.levels.DEBUG)},t.prototype.info=function(t){this.log(t,i.levels.INFO)},t.prototype.warn=function(t){this.log(t,i.levels.WARN)},t.prototype.error=function(t){this.log(t,i.levels.ERROR)},t.prototype.log=function(t,e){if(this.isEnabled){var n="%c"+this.appName+": "+t,o="color:"+r[e]+";font-weight:500;font-size:12px";switch(Number(e)){case 0:case 1:i.debug(n,o);break;case 2:i.info(n,o);break;case 3:i.warn(n,o);break;case 4:i.error(n,o)}}},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.createHtmlElement=function(t,e,n,o){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===o&&(o=null);var i=document.createElement(t);if(e&&(i.textContent=e),n.forEach((function(t){return i.classList.add(t)})),o){for(var r="",s=0,l=Object.entries(o);s<l.length;s++){var a=l[s];r+=a[0]+":"+a[1]+";"}i.style.cssText=r}return i},t.createImageElement=function(e,n,o){void 0===n&&(n=[]),void 0===o&&(o=null);var i=t.createHtmlElement("img",null,n,o);return i.setAttribute("src",e),i},t.createInputElement=function(e,n,o,i){void 0===n&&(n=""),void 0===o&&(o=[]),void 0===i&&(i=null);var r=t.createHtmlElement("input",null,o,i);return r.setAttribute("type",e),n&&r.setAttribute("placeholder",n),r},t.copyHTMLElement=function(t){return t.cloneNode(!0)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.hideElement=function(t){t&&(t.style.display="none")},t.showElement=function(t,e){void 0===e&&(e="block"),t&&(t.style.display=e)},t.applyInlineStyles=function(t,e){for(var n=t.style.cssText,o=0,i=Object.entries(e);o<i.length;o++){var r=i[o];n+=r[0]+":"+r[1]+" !important;"}t.style.cssText=n},t}();e.default=o},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return t.apply(e,n)}}},function(t,e,n){"use strict";var o=n(1);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var r;if(n)r=n(e);else if(o.isURLSearchParams(e))r=e.toString();else{var s=[];o.forEach(e,(function(t,e){null!=t&&(o.isArray(t)?e+="[]":t=[t],o.forEach(t,(function(t){o.isDate(t)?t=t.toISOString():o.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),r=s.join("&")}if(r){var l=t.indexOf("#");-1!==l&&(t=t.slice(0,l)),t+=(-1===t.indexOf("?")?"?":"&")+r}return t}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";(function(e){var o=n(1),i=n(24),r={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!o.isUndefined(t)&&o.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var l,a={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==e&&"[object process]"===Object.prototype.toString.call(e))&&(l=n(10)),l),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),o.isFormData(t)||o.isArrayBuffer(t)||o.isBuffer(t)||o.isStream(t)||o.isFile(t)||o.isBlob(t)?t:o.isArrayBufferView(t)?t.buffer:o.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):o.isObject(t)?(s(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};a.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],(function(t){a.headers[t]={}})),o.forEach(["post","put","patch"],(function(t){a.headers[t]=o.merge(r)})),t.exports=a}).call(this,n(23))},function(t,e,n){"use strict";var o=n(1),i=n(25),r=n(27),s=n(7),l=n(28),a=n(31),u=n(32),c=n(11);t.exports=function(t){return new Promise((function(e,n){var d=t.data,p=t.headers;o.isFormData(d)&&delete p["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";p.Authorization="Basic "+btoa(f+":"+v)}var m=l(t.baseURL,t.url);if(h.open(t.method.toUpperCase(),s(m,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var o="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:o,config:t,request:h};i(e,n,r),h=null}},h.onabort=function(){h&&(n(c("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(c("Network Error",t,null,h)),h=null},h.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(c(e,t,"ECONNABORTED",h)),h=null},o.isStandardBrowserEnv()){var y=(t.withCredentials||u(m))&&t.xsrfCookieName?r.read(t.xsrfCookieName):void 0;y&&(p[t.xsrfHeaderName]=y)}if("setRequestHeader"in h&&o.forEach(p,(function(t,e){void 0===d&&"content-type"===e.toLowerCase()?delete p[e]:h.setRequestHeader(e,t)})),o.isUndefined(t.withCredentials)||(h.withCredentials=!!t.withCredentials),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){h&&(h.abort(),n(t),h=null)})),d||(d=null),h.send(d)}))}},function(t,e,n){"use strict";var o=n(26);t.exports=function(t,e,n,i,r){var s=new Error(t);return o(s,e,n,i,r)}},function(t,e,n){"use strict";var o=n(1);t.exports=function(t,e){e=e||{};var n={},i=["url","method","data"],r=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function a(t,e){return o.isPlainObject(t)&&o.isPlainObject(e)?o.merge(t,e):o.isPlainObject(e)?o.merge({},e):o.isArray(e)?e.slice():e}function u(i){o.isUndefined(e[i])?o.isUndefined(t[i])||(n[i]=a(void 0,t[i])):n[i]=a(t[i],e[i])}o.forEach(i,(function(t){o.isUndefined(e[t])||(n[t]=a(void 0,e[t]))})),o.forEach(r,u),o.forEach(s,(function(i){o.isUndefined(e[i])?o.isUndefined(t[i])||(n[i]=a(void 0,t[i])):n[i]=a(void 0,e[i])})),o.forEach(l,(function(o){o in e?n[o]=a(t[o],e[o]):o in t&&(n[o]=a(void 0,t[o]))}));var c=i.concat(r).concat(s).concat(l),d=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===c.indexOf(t)}));return o.forEach(d,u),n}},function(t,e,n){"use strict";function o(t){this.message=t}o.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},o.prototype.__CANCEL__=!0,t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),i=function(t){this.appName=t,this.logger=new o.default(this.appName)};e.default=i},function(t,e,n){var o,i;!function(r,s){"use strict";void 0===(i="function"==typeof(o=function(){var t=function(){},e="undefined"!=typeof window&&void 0!==window.navigator&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function o(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function r(n){return"debug"===n&&(n="log"),"undefined"!=typeof console&&("trace"===n&&e?i:void 0!==console[n]?o(console,n):void 0!==console.log?o(console,"log"):t)}function s(e,o){for(var i=0;i<n.length;i++){var r=n[i];this[r]=i<e?t:this.methodFactory(r,e,o)}this.log=this.debug}function l(t,e,n){return function(){"undefined"!=typeof console&&(s.call(this,e,n),this[t].apply(this,arguments))}}function a(t,e,n){return r(t)||l.apply(this,arguments)}function u(t,e,o){var i,r=this,l="loglevel";function u(){var t;if("undefined"!=typeof window&&l){try{t=window.localStorage[l]}catch(t){}if(void 0===t)try{var e=window.document.cookie,n=e.indexOf(encodeURIComponent(l)+"=");-1!==n&&(t=/^([^;]+)/.exec(e.slice(n))[1])}catch(t){}return void 0===r.levels[t]&&(t=void 0),t}}"string"==typeof t?l+=":"+t:"symbol"==typeof t&&(l=void 0),r.name=t,r.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},r.methodFactory=o||a,r.getLevel=function(){return i},r.setLevel=function(e,o){if("string"==typeof e&&void 0!==r.levels[e.toUpperCase()]&&(e=r.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=r.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(i=e,!1!==o&&function(t){var e=(n[t]||"silent").toUpperCase();if("undefined"!=typeof window&&l){try{return void(window.localStorage[l]=e)}catch(t){}try{window.document.cookie=encodeURIComponent(l)+"="+e+";"}catch(t){}}}(e),s.call(r,e,t),"undefined"==typeof console&&e<r.levels.SILENT)return"No console available for logging"},r.setDefaultLevel=function(t){u()||r.setLevel(t,!1)},r.enableAll=function(t){r.setLevel(r.levels.TRACE,t)},r.disableAll=function(t){r.setLevel(r.levels.SILENT,t)};var c=u();null==c&&(c=null==e?"WARN":e),r.setLevel(c,!1)}var c=new u,d={};c.getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=d[t];return e||(e=d[t]=new u(t,c.getLevel(),c.methodFactory)),e};var p="undefined"!=typeof window?window.log:void 0;return c.noConflict=function(){return"undefined"!=typeof window&&window.log===c&&(window.log=p),c},c.getLoggers=function(){return d},c.default=c,c})?o.call(e,n,e,t):o)||(t.exports=i)}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),i=n(5),r=function(){function t(){}return t.injectLinkedStylesheet=function(t){var e=document.createElement("link");e.rel="stylesheet",e.href=t,document.head.appendChild(e)},t.injectRawStyle=function(t){var e=document.createElement("style");e.textContent=t,document.head.appendChild(e)},t.injectElements=function(t,e,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);for(var i=function(i){var r=document.querySelectorAll(e[i]);if(r[0]){var s=o?r[0].parentElement:r[0];return(n?null==t?void 0:t.reverse():t).forEach((function(t){n?null==s||s.prepend(t):null==s||s.appendChild(t)})),{value:!0}}},r=0;r<(null==e?void 0:e.length);r++){var s=i(r);if("object"==typeof s)return s.value}return!1},t.injectAlert=function(t,e,n,r){void 0===e&&(e="#0cd4a6"),void 0===n&&(n="#fff"),void 0===r&&(r=4e3);var s={"background-color":e+"!important",color:n+"!important","font-size":"14px","line-height":"21px",padding:"15px 30px",position:"fixed",right:"15px",bottom:"15px",width:"340px","z-index":"2147483647"},l=o.default.createHtmlElement("div",t,["restockify-toast"],s);document.body.appendChild(l),setTimeout((function(){i.default.hideElement(l)}),r)},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.getCurrentUrl=function(){return window.location.href},t.getQueryParameter=function(t,e){try{if(!e)return"";t=t.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}catch(t){return null}},t.sanitizeUrl=function(t){return t.replace(/^([^#?]+)(?:.*)$/,"$1")},t.getBaseURL=function(){var e=t.getCurrentUrl().match(/^((?:https?:\/\/)?[\w\.\-]+)\/?.*$/);return e?e[1]:null},t.isProductPage=function(){var e=t.getCurrentUrl();return Boolean(e&&/.+\/products\/.+/.test(e))},t.isCollectionPage=function(){var e=t.getCurrentUrl();return Boolean(e&&/.+\/collections\/.*/.test(e))},t.isHomePage=function(){var e=t.getCurrentUrl();return t.getBaseURL()===e.replace(/\/+$/,"")},t.hasInitialVariantParam=function(){var t,e,n=null!==(e=null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.href)&&void 0!==e?e:"";return Boolean(n&&new RegExp(".*variant=.*").test(n))},t.getCollectionSlug=function(){var e,n,o=null!==(n=null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.href)&&void 0!==n?n:"";return t.sanitizeUrl(o).split("/collections/")[1].split("/")[0]},t.addUrlChangeListener=function(e,n,o){var i,r;void 0===o&&(o=200),setInterval((function(){r=t.getQueryParameter(e,window.location.href),Boolean(r)&&r!==i&&(i=r,n(r))}),o)},t}();e.default=o},function(t,e,n){"use strict";var o=n(1),i=n(6),r=n(19),s=n(12);function l(t){var e=new r(t),n=i(r.prototype.request,e);return o.extend(n,r.prototype,e),o.extend(n,e),n}var a=l(n(9));a.Axios=r,a.create=function(t){return l(s(a.defaults,t))},a.Cancel=n(13),a.CancelToken=n(33),a.isCancel=n(8),a.all=function(t){return Promise.all(t)},a.spread=n(34),a.isAxiosError=n(35),t.exports=a,t.exports.default=a},function(t,e,n){"use strict";var o=n(1),i=n(7),r=n(20),s=n(21),l=n(12);function a(t){this.defaults=t,this.interceptors={request:new r,response:new r}}a.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=l(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[s,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},a.prototype.getUri=function(t){return t=l(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},o.forEach(["delete","get","head","options"],(function(t){a.prototype[t]=function(e,n){return this.request(l(n||{},{method:t,url:e,data:(n||{}).data}))}})),o.forEach(["post","put","patch"],(function(t){a.prototype[t]=function(e,n,o){return this.request(l(o||{},{method:t,url:e,data:n}))}})),t.exports=a},function(t,e,n){"use strict";var o=n(1);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){o.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},function(t,e,n){"use strict";var o=n(1),i=n(22),r=n(8),s=n(9);function l(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return l(t),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=o.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),o.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return l(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return r(e)||(l(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,n){"use strict";var o=n(1);t.exports=function(t,e,n){return o.forEach(n,(function(n){t=n(t,e)})),t}},function(t,e){var n,o,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(t){o=s}}();var a,u=[],c=!1,d=-1;function p(){c&&a&&(c=!1,a.length?u=a.concat(u):d=-1,u.length&&h())}function h(){if(!c){var t=l(p);c=!0;for(var e=u.length;e;){for(a=u,u=[];++d<e;)a&&a[d].run();d=-1,e=u.length}a=null,c=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||c||l(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var o=n(1);t.exports=function(t,e){o.forEach(t,(function(n,o){o!==e&&o.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[o])}))}},function(t,e,n){"use strict";var o=n(11);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(o("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,o,i){return t.config=e,n&&(t.code=n),t.request=o,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},function(t,e,n){"use strict";var o=n(1);t.exports=o.isStandardBrowserEnv()?{write:function(t,e,n,i,r,s){var l=[];l.push(t+"="+encodeURIComponent(e)),o.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),o.isString(i)&&l.push("path="+i),o.isString(r)&&l.push("domain="+r),!0===s&&l.push("secure"),document.cookie=l.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var o=n(29),i=n(30);t.exports=function(t,e){return t&&!o(e)?i(t,e):e}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var o=n(1),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,r,s={};return t?(o.forEach(t.split("\n"),(function(t){if(r=t.indexOf(":"),e=o.trim(t.substr(0,r)).toLowerCase(),n=o.trim(t.substr(r+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}})),s):s}},function(t,e,n){"use strict";var o=n(1);t.exports=o.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var o=t;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=o.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var o=n(13);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new o(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},function(t,e,n){"use strict";var o;n.r(e),function(t){t.RESTOCKIFY="_RestockifyConfig",t.RESTOCK_ALERTS="_ReStockConfig"}(o||(o={}));var i,r,s=n(0),l=n.n(s);!function(t){t.PRODUCT="PRODUCT_PAGE",t.COLLECTION="COLLECTION_PAGE",t.LANDING="LANDING_PAGES"}(i||(i={})),function(t){t.BUTTON="BUTTON",t.NOT_DISPLAYED="NOT_DISPLAYED",t.FORM="FORM"}(r||(r={}));var a,u,c=["btn","button","Button","button-primary","Button-primary","button--primary","Button--primary"],d=function(){var t=document.documentElement.lang;return t||("Shopify"in window?window.Shopify.locale:null)},p=n(2),h=n.n(p),f=['form[action="/cart/add"]',".shopify-product-form",".product-form",".product-form-inline-atc",".add-to-cart",".add-cart-wrapper",".product-unavailable",".product-out-of-stock",".sold_out",".sold-out__container",".shop-button-soldout",".modal_price",".purchase",".purchase-section",".product__price",".product-price",".product-add",".action-button",".product-information-buttons",".Shopify-product-details__short-description",".product-single__add-to-cart",".product-single__price-product-template",".product-single__quantity",".product-detail__form",".product-single__meta",".product-single__incoming",".product-single__policies",".product_meta"],v=function(){return(v=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},m=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))},y=function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},g=new(function(){function t(){this.axios=h.a.create(),this.axios.defaults.timeout=9e4,this.axios.defaults.baseURL="https://api-new.restock-alerts.com",this.axios.defaults.headers["Content-Type"]="application/json"}return t.prototype.initialize=function(t){this.shopId=t},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return m(this,void 0,void 0,(function(){var e;return y(this,(function(n){return[2,(e=this.axios).get.apply(e,t).catch((function(t){return Promise.reject(t)}))]}))}))},t.prototype.post=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return m(this,void 0,void 0,(function(){var e;return y(this,(function(n){return[2,(e=this.axios).post.apply(e,t).catch((function(t){return Promise.reject(t)}))]}))}))},t.prototype.patch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return m(this,void 0,void 0,(function(){var e;return y(this,(function(n){return[2,(e=this.axios).patch.apply(e,t).catch((function(t){return Promise.reject(t)}))]}))}))},t.prototype.delete=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return m(this,void 0,void 0,(function(){var e;return y(this,(function(n){return[2,(e=this.axios).delete.apply(e,t).catch((function(t){return Promise.reject(t)}))]}))}))},t.prototype.getShopConfig=function(t){return this.get("/account/settings/sdk-config/"+t)},t.prototype.subscribeToProduct=function(t){return this.post("/subscription/",v({shop_id:this.shopId},t))},t}()),C=function(){function t(){}return t.injectAlert=function(t,e,n,o){void 0===o&&(o=!1);var i=s.ElementsUtils.createHtmlElement("div",t,["restock-alerts-toast","toastStyle"]);i.style.backgroundColor=null!=e?e:"#0cd4a6",i.style.color=null!=n?n:"#fff",document.body.appendChild(i),o||setTimeout((function(){s.StyleUtils.hideElement(i)}),4e3)},t.injectOverlay=function(){var t=s.ElementsUtils.createHtmlElement("div","",["restock-alerts-live-preview-overlay","livePreviewOverlayStyle"]);document.body.appendChild(t)},t.injectElementsToCollectionPagesCustomWrappers=function(e,n,o,i,r){void 0===i&&(i=!1),void 0===r&&(r=!1);for(var s=function(s){var l=Array.from(document.querySelectorAll(n[s])).filter((function(t){return Boolean(t.querySelector('a[href*="'+o+'"]'))})).find((function(e){var n=e.querySelector('a[href*="'+o+'"]');return t.getLastSegmentOfUrl(null==n?void 0:n.href)===o}));if(l){var a=r?l.parentElement:l;return(i?null==e?void 0:e.reverse():e).forEach((function(t){i?null==a||a.prepend(t):null==a||a.appendChild(t)})),{value:!0}}},l=0;l<(null==n?void 0:n.length);l++){var a=s(l);if("object"==typeof a)return a.value}return!1},t.injectElementsToCollectionPagesDefaultWrapper=function(e,n,o){for(var i=function(i){var r=document.querySelectorAll(n[i]),s=Array.from(r).reverse().find((function(e){return t.getLastSegmentOfUrl(null==e?void 0:e.href)===o}));if(s)return e.forEach((function(t){var e;return null===(e=s.parentElement)||void 0===e?void 0:e.appendChild(t)})),{value:!0}},r=0;r<(null==n?void 0:n.length);r++){var s=i(r);if("object"==typeof s)return s.value}return!1},t.getLastSegmentOfUrl=function(t){if(!t)return"";var e=t.split("?")[0];return e.substring(e.lastIndexOf("/")+1)},t}(),b=new(function(){function t(){}return t.prototype.createIcons=function(){this.createCloseIcon(),this.createEmailIcon(),this.createSmsIcon()},t.prototype.createCloseIcon=function(){this.closeIcon=s.ElementsUtils.createImageElement("https://cdn.shopgram.app/img/close-icon.png",["restock-alerts-modal-close-btn","modalCloseButtonStyle"]),s.StyleUtils.applyInlineStyles(this.closeIcon,{width:"15px"})},t.prototype.createEmailIcon=function(){this.emailIcon=s.ElementsUtils.createImageElement("https://cdn.shopgram.app/img/email-icon.png",["restock-alerts-inline-icon"]),s.StyleUtils.applyInlineStyles(this.emailIcon,{width:"20px"})},t.prototype.createSmsIcon=function(){this.smsIcon=s.ElementsUtils.createImageElement("https://cdn.shopgram.app/img/sms-icon.png",["restock-alerts-inline-icon"]),s.StyleUtils.applyInlineStyles(this.smsIcon,{width:"20px"})},t.prototype.getCloseIcon=function(){return this.closeIcon},t.prototype.getEmailIcon=function(){return this.emailIcon},t.prototype.getSmsIcon=function(){return this.smsIcon},t}()),E=function(){function t(t,e){this.isSelected=!1,this.checkboxLabelWrapper=s.ElementsUtils.createHtmlElement("div"),this.labelText=t,this.channelSlug=e,this.hasCheckbox="push-notification"===e,this.checkboxId="restock-alerts-"+this.channelSlug+"-label",this.createComponents()}return t.prototype.createComponents=function(){this.hasCheckbox?this.createCheckboxComponent():this.createIconComponent(),this.createLabelComponent(),this.createUiComponent()},t.prototype.createCheckboxComponent=function(){this.checkboxOrIconComponent=s.ElementsUtils.createInputElement("checkbox",null,["restock-alerts-"+this.channelSlug+"-checkbox","fieldCheckboxStyle"]),this.checkboxOrIconComponent.setAttribute("id",this.checkboxId),this.addChangeListenerToCheckbox()},t.prototype.addChangeListenerToCheckbox=function(){var t=this;this.checkboxOrIconComponent.addEventListener("change",(function(){t.checkboxOrIconComponent.getAttribute("checked")?t.deselectChannel():t.selectChannel()}))},t.prototype.createIconComponent=function(){this.checkboxOrIconComponent="sms"===this.channelSlug?b.getSmsIcon():b.getEmailIcon()},t.prototype.createLabelComponent=function(){this.labelComponent=s.ElementsUtils.createHtmlElement("label","",["restock-alerts-"+this.channelSlug+"-label","fieldLabelStyle"]),this.labelComponent.setAttribute("for",this.checkboxId);var t=s.ElementsUtils.createHtmlElement("div"," "+this.labelText,["restock-alerts-"+this.channelSlug+"-label-span","fieldLabelTextStyle"]);this.labelComponent.appendChild(t),this.labelComponent.prepend(this.checkboxOrIconComponent)},t.prototype.createUiComponent=function(){this.uiComponent=s.ElementsUtils.createHtmlElement("div","",["restock-alerts-"+this.channelSlug+"-channel-form","channelWrapperStyle"]),this.checkboxLabelWrapper.appendChild(this.labelComponent),this.uiComponent.appendChild(this.checkboxLabelWrapper)},t.prototype.makeCheckboxUnclickable=function(){this.labelComponent.style.pointerEvents="none",this.checkboxOrIconComponent.style.pointerEvents="none"},t.prototype.makeCheckboxClickable=function(){this.labelComponent.style.pointerEvents="auto",this.checkboxOrIconComponent.style.pointerEvents="auto"},t.prototype.selectChannel=function(){this.isSelected=!0,this.checkboxOrIconComponent.setAttribute("checked","checked")},t.prototype.deselectChannel=function(){this.isSelected=!1,this.checkboxOrIconComponent.removeAttribute("checked")},t}(),w=(a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),S=function(t){function e(e,n,o,i){var r=t.call(this,e,n)||this;return r.inputPlaceholder=o,r.errorMessage=i,r.createInputComponent(),r}return w(e,t),e.prototype.createInputComponent=function(){this.inputComponent=s.ElementsUtils.createInputElement("text",this.inputPlaceholder,["restock-alerts-"+this.channelSlug+"-input","inputStyle"]),this.inputErrorComponent=s.ElementsUtils.createHtmlElement("p",this.errorMessage,["restock-alerts-"+this.channelSlug+"-error","errorStyle"]),s.StyleUtils.hideElement(this.inputErrorComponent)},e.prototype.addInputComponentToChannelUiComponent=function(){this.uiComponent.appendChild(this.inputComponent),this.uiComponent.appendChild(this.inputErrorComponent)},e.prototype.setInputValue=function(t){this.inputComponent.value=t},e.prototype.isNotEmpty=function(){return!!this.getInputValue()},e.prototype.getInputValue=function(){return this.inputComponent.value},e.prototype.showInputError=function(){var t=this;this.inputErrorComponent&&s.StyleUtils.showElement(this.inputErrorComponent),setTimeout((function(){t.inputErrorComponent&&s.StyleUtils.hideElement(t.inputErrorComponent)}),3e3)},e}(E),_=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),I=function(t){function e(e){var n=t.call(this,null==e?void 0:e.email_label,"email",null==e?void 0:e.email_input_placeholder,null==e?void 0:e.invalid_email_error_message)||this;n.validationRegex=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)+$/,n.addInputComponentToChannelUiComponent(),n.selectChannel();var o="localStorage"in window?localStorage.getItem("clientEmail"):"";return o&&n.setInputValue(o),n}return _(e,t),e.prototype.checkEmailValidation=function(){var t=this.getInputValue();return!(!t||!this.validationRegex.test(String(t).toLowerCase()))&&(localStorage.setItem("clientEmail",this.getInputValue()),!0)},e}(S);!function(t){t.DEFAULT="default",t.DENIED="denied",t.GRANTED="granted",t.UNSUPPORTED="unsupported"}(u||(u={}));var P,x=new(function(){function t(){this.currentPermission=this.fetchCurrentPermission()}return t.prototype.fetchCurrentPermission=function(){return this.isSupportedByBrowser()?Notification.permission:(console.log("THIS BROWSER DO NOT SUPPORT PUSH NOTIFICATIONS"),u.UNSUPPORTED)},t.prototype.isSupportedByBrowser=function(){return"Notification"in window&&"serviceWorker"in window.navigator},t.prototype.requestPermission=function(t){var e=this;if(this.isNotSupportedByBrowser())t(u.UNSUPPORTED);else if(localStorage.getItem("pushowl_subscriber_token"))this.isPromiseBasedRequestSupported()?Notification.requestPermission().then((function(n){e.setCurrentPermission(n),t(n)})):Notification.requestPermission((function(n){e.setCurrentPermission(n),t(n)}));else if("Bestpush"in window){var n=window.Bestpush.addEventListener("subscriptionchange",(function(o){var i,r,s="prompt"===(null===(i=null==o?void 0:o.detail)||void 0===i?void 0:i.state)?u.DEFAULT:null===(r=null==o?void 0:o.detail)||void 0===r?void 0:r.state;e.setCurrentPermission(s),t(s),window.Bestpush.removeEventListener("subscriptionchange",n)}));window.Bestpush.subscribe({showDialog:!1})}},t.prototype.isNotSupportedByBrowser=function(){return this.currentPermission===u.UNSUPPORTED},t.prototype.isPromiseBasedRequestSupported=function(){try{Notification.requestPermission().then()}catch(t){return!1}return!0},t.prototype.syncCurrentPermission=function(){this.currentPermission=Notification.permission},t.prototype.isPermissionGranted=function(){return this.currentPermission===u.GRANTED},t.prototype.isPermissionDenied=function(){return this.currentPermission===u.DENIED},t.prototype.setCurrentPermission=function(t){this.currentPermission=t},t}());!function(t){t.PUSHOWL="PUSHOWL",t.PUSHE="PUSHE"}(P||(P={}));var U=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),O=function(t){function e(e,n){var o=t.call(this,e,"push-notification")||this;return o.isAllowed=!!n&&!x.isNotSupportedByBrowser()&&!x.isPermissionDenied(),"Bestpush"in window&&window.Bestpush.getDeviceId().then((function(t){o.pusheToken=t})),x.isPermissionGranted()&&o.selectChannel(),x.isPermissionGranted()||(o.makeCheckboxUnclickable(),o.addClickListenerToCheckboxLabel()),o}return U(e,t),e.prototype.addClickListenerToCheckboxLabel=function(){var t=this;this.checkboxLabelWrapper.addEventListener("click",(function(){t.checkboxLabelClickCallback()}))},e.prototype.checkboxLabelClickCallback=function(){x.syncCurrentPermission(),x.isPermissionGranted()?this.clickActionsIfPermissionIsGranted():this.requestPushNotificationPermission()},e.prototype.clickActionsIfPermissionIsGranted=function(){this.selectChannel(),this.makeCheckboxClickable(),this.removeClickListenerFromCheckboxLabel()},e.prototype.requestPushNotificationPermission=function(){var t=this;x.requestPermission((function(e){e===u.GRANTED?t.clickActionsIfPermissionIsGranted():e===u.DENIED&&t.checkboxOrIconComponent.setAttribute("disabled","disabled")}))},e.prototype.removeClickListenerFromCheckboxLabel=function(){var t=this;this.checkboxLabelWrapper.removeEventListener("click",(function(){t.checkboxLabelClickCallback()}))},e.prototype.getPushOwlToken=function(){return localStorage.getItem("pushowl_subscriber_token")},e.prototype.isPushAllowed=function(){return this.isAllowed},e.prototype.isPushAllowedAndSelected=function(){return this.isAllowed&&this.isSelected},e.prototype.getPushToken=function(){var t=this.getPushOwlToken();return t||this.pusheToken},e.prototype.getPushProvider=function(){return this.getPushOwlToken()?P.PUSHOWL:P.PUSHE},e}(E),T=new(function(){function t(){this.countryCodes=[]}return t.prototype.fetchResources=function(){this.fetchCountryCodes()},t.prototype.fetchCountryCodes=function(){var t=this;h.a.get("https://cdn.hengam.io/restock/countries.json").then((function(e){t.countryCodes=e.data})).catch((function(t){return console.log("UNABLE TO GET COUNTRY CODES: ",t)}))},t.prototype.getCountryCodes=function(){return this.countryCodes},t}()),k=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),A=function(t){function e(e){var n=t.call(this,e.sms_label,"sms",null==e?void 0:e.sms_input_placeholder,null==e?void 0:e.invalid_phone_number_error_message)||this;return n.validationRegex=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im,n.countryCodes=T.getCountryCodes(),n.createCountrySelectComponent(),n.addInputComponentToChannelUiComponent(),n.setInitialNumber(),n}return k(e,t),e.prototype.createCountrySelectComponent=function(){var t=this;this.countrySelectComponent=s.ElementsUtils.createHtmlElement("select","",["restock-alerts-country-select","selectBoxStyle"]),this.countryCodes.forEach((function(e){var n=s.ElementsUtils.createHtmlElement("option",e.code+" ("+e.dial_code+")");n.setAttribute("value",e.code),t.countrySelectComponent.appendChild(n)})),this.setCountryCode("US"),this.countrySelectComponent.addEventListener("change",(function(e){t.setCountryCode(e.target.value)}))},e.prototype.addInputComponentToChannelUiComponent=function(){var t=s.ElementsUtils.createHtmlElement("div","",["restock-alerts-sms-input-container","noWrapFlexContainer"]);s.StyleUtils.applyInlineStyles(this.countrySelectComponent,{width:"29%","margin-bottom":"0","margin-right":"1%"}),s.StyleUtils.applyInlineStyles(this.inputComponent,{width:"70%"}),t.appendChild(this.countrySelectComponent),t.appendChild(this.inputComponent),this.uiComponent.appendChild(t),this.uiComponent.appendChild(this.inputErrorComponent)},e.prototype.setInitialNumber=function(){var t="localStorage"in window?localStorage.getItem("clientNumber"):"";t&&this.setInputValue(t);var e="localStorage"in window?localStorage.getItem("clientCountryCode"):"";e&&this.setCountryCode(e)},e.prototype.setCountryCode=function(t){this.countrySelectComponent.value=t,this.selectedCountryCode=t},e.prototype.getCountryDialCode=function(){var t=this;return this.countryCodes.find((function(e){return e.code===t.selectedCountryCode})).dial_code},e.prototype.getInputValue=function(){return this.inputComponent.value},e.prototype.getPhoneNumber=function(){return this.getCountryDialCode()+this.getInputValue()},e.prototype.checkSmsValidation=function(){var t=this.getInputValue(),e=this.getPhoneNumber();return!(!t||!this.validationRegex.test(String(e).toLowerCase()))&&(localStorage.setItem("clientNumber",t),localStorage.setItem("clientCountryCode",this.selectedCountryCode),!0)},e}(S),L=function(){var t,e;return"Shopify"in window&&null!==(e=null===(t=window.Shopify)||void 0===t?void 0:t.shop)&&void 0!==e?e:window.location.host},j=function(t,e){for(var n=0,o=e.length,i=t.length;n<o;n++,i++)t[i]=e[n];return t},N=function(){function t(t,e,n,o,i,r){this.shopConfig=t,this.product=e,this.unavailableVariants=n,this.content=o,this.selectedVariantId=i||(null==n?void 0:n[0].id.toString()),this.customStyles=r,this.emailChannel=new I(o),this.smsChannel=new A(o),this.pushChannel=new O(null==o?void 0:o.push_label,this.shopConfig.is_push_enabled)}return t.prototype.displayModal=function(){var t=this;this.modalComponent=s.ElementsUtils.createHtmlElement("div","",["restock-alerts-modal-wrapper","modalWrapperStyle"]),this.modalBox=s.ElementsUtils.createHtmlElement("div","",["restock-alerts-modal-box","modalBoxStyle"]);var e=b.getCloseIcon();e.addEventListener("click",(function(){return t.destroyModal()})),this.modalBox.appendChild(e);var n=this.createNotifyMeFormComponent();this.modalBox.appendChild(n);var o=function(){var t=s.ElementsUtils.createHtmlElement("p","Powered by",["restock-alerts-branding-text","brandingStyle"]),e=s.ElementsUtils.createHtmlElement("a","Restock Alerts",["restock-alerts-branding-link"],{color:"#0bb28d",display:"inline-block","padding-left":"5px"});return e.setAttribute("href","https://apps.shopify.com/restock-alert"),e.setAttribute("target","_blank"),t.appendChild(e),{poweredText:t}}().poweredText;this.shopConfig.disable_branding_permission||this.modalBox.appendChild(o),this.modalComponent.appendChild(this.modalBox),document.body.appendChild(this.modalComponent)},t.prototype.showErrorComponent=function(){this.emailChannel.showInputError()},t.prototype.createNotifyMeFormComponent=function(){var t,e,n,o,i=s.ElementsUtils.createHtmlElement("div","",["restock-alerts-form"]),r=s.ElementsUtils.createHtmlElement("div",this.content.form_title,["restock-alerts-form-title","formTitleStyle"]);i.appendChild(r);var l=(null===(e=null===(t=this.product)||void 0===t?void 0:t.variants)||void 0===e?void 0:e.length)>1&&(null===(n=this.unavailableVariants)||void 0===n?void 0:n.length)>0;return l&&this.createVariantSelectComponent(),this.createAgreementTextLabel(),this.createNoChannelsErrorComponent(),this.createSubmitButtonComponent(),this.addClickListenerToSubmitButton(),i.appendChild(this.emailChannel.uiComponent),this.shopConfig.is_sms_enabled&&i.appendChild(this.smsChannel.uiComponent),this.pushChannel.isPushAllowed()&&i.appendChild(this.pushChannel.uiComponent),l&&i.appendChild(this.variantSelectComponent),(null===(o=this.shopConfig)||void 0===o?void 0:o.has_contact_integration)&&i.appendChild(this.agreementTextLabel),i.appendChild(this.noChannelsErrorComponent),i.appendChild(this.submitButtonComponent),i},t.prototype.setSelectedVariantId=function(t){this.variantSelectComponent&&(this.variantSelectComponent.value=t),this.selectedVariantId=t},t.prototype.createVariantSelectComponent=function(){var t=this;this.variantSelectComponent=s.ElementsUtils.createHtmlElement("select","",["restock-alerts-variant-select","selectBoxStyle"]),this.unavailableVariants.forEach((function(e){var n,o=s.ElementsUtils.createHtmlElement("option",null==e?void 0:e.title);o.setAttribute("value",null===(n=null==e?void 0:e.id)||void 0===n?void 0:n.toString()),t.variantSelectComponent.appendChild(o)})),this.variantSelectComponent.value=this.selectedVariantId,this.variantSelectComponent.addEventListener("change",(function(e){var n=e.target.value;t.variantSelectComponent.value=n,t.selectedVariantId=n}))},t.prototype.createAgreementTextLabel=function(){var t,e=this;this.agreementTextLabel=s.ElementsUtils.createHtmlElement("label","",["restock-alerts-agreement-text-label","agreementTextLabelStyle"]);var n=s.ElementsUtils.createHtmlElement("span",null===(t=this.content)||void 0===t?void 0:t.add_to_contacts_checkbox_text,["restock-alerts-agreement-text-span"],{"padding-left":"5px"});this.agreementTextLabel.appendChild(n),this.agreementTextCheckbox=s.ElementsUtils.createInputElement("checkbox",null,["agreementCheckboxStyle"]),this.agreementTextCheckbox.setAttribute("checked","checked"),this.agreementTextLabel.addEventListener("change",(function(){e.agreementTextCheckbox.getAttribute("checked")?e.agreementTextCheckbox.removeAttribute("checked"):e.agreementTextCheckbox.setAttribute("checked","checked")})),this.agreementTextLabel.prepend(this.agreementTextCheckbox)},t.prototype.createNoChannelsErrorComponent=function(){var t;this.noChannelsErrorComponent=s.ElementsUtils.createHtmlElement("p",null!==(t=this.content.no_channels_selected_error_message)&&void 0!==t?t:"You need to subscribe to one of the channels.",["restock-alerts-no-channels-error","errorStyle"],{"margin-bottom":"0 !important"}),s.StyleUtils.hideElement(this.noChannelsErrorComponent)},t.prototype.createSubmitButtonComponent=function(){var t,e=this;this.submitButtonComponent=s.ElementsUtils.createHtmlElement("button",null===(t=this.content)||void 0===t?void 0:t.button_text,j(["restock-alerts-submit-button","notifyButtonStyle","submitButtonStyle"],this.customStyles.buttonClasses)),s.StyleUtils.applyInlineStyles(this.submitButtonComponent,this.customStyles.userStyles),c.forEach((function(t){return e.submitButtonComponent.classList.add(t)}))},t.prototype.addClickListenerToSubmitButton=function(){var t=this;this.submitButtonComponent.addEventListener("click",(function(e){e.preventDefault(),t.validateForm()&&(t.disableModal(),t.subscribeToProduct())}))},t.prototype.validateForm=function(){var t=this.emailChannel.checkEmailValidation(),e=this.smsChannel.checkSmsValidation();return this.emailChannel.isNotEmpty()&&!t?(this.emailChannel.showInputError(),!1):this.smsChannel.isNotEmpty()&&!e?(this.smsChannel.showInputError(),!1):!!(this.emailChannel.isNotEmpty()||this.smsChannel.isNotEmpty()||this.pushChannel.isPushAllowedAndSelected())||(this.displayNoChannelsError(),!1)},t.prototype.subscribeToProduct=function(){var t,e,n,o,i,r=this,s=this.emailChannel.checkEmailValidation(),l=this.shopConfig.is_sms_enabled&&this.smsChannel.checkSmsValidation(),a=this.emailChannel.getInputValue(),u=this.smsChannel.getPhoneNumber(),c=this.pushChannel.isPushAllowedAndSelected(),p={email:s?a:null,phone_number:l?u:null,push_token:c?this.pushChannel.getPushToken():null,push_provider:c?this.pushChannel.getPushProvider():null,locale:d(),product_id:this.product.id,url:"https://"+L()+"/products/"+this.product.handle+(this.selectedVariantId?"?variant="+this.selectedVariantId:""),variant_id:this.selectedVariantId,timezone:(o="0",i=(new Date).getTimezoneOffset(),0!=(i=i/60*-1)&&(o=i>0?"+":"-",o+=i),o)};(null===(t=this.shopConfig)||void 0===t?void 0:t.has_contact_integration)&&(p.contact_list_consent=Boolean(this.agreementTextCheckbox.getAttribute("checked")));var h="#"+(null===(e=this.customStyles.toastStyles)||void 0===e?void 0:e.backgroundColor),f="#"+(null===(n=this.customStyles.toastStyles)||void 0===n?void 0:n.color);g.subscribeToProduct(p).then((function(t){var e;r.destroyModal(),C.injectAlert(null===(e=r.content)||void 0===e?void 0:e.after_subscribe_message_text,h,f)})).catch((function(t){var e,n;r.destroyModal(),461===(null===(e=null==t?void 0:t.response)||void 0===e?void 0:e.status)&&C.injectAlert(null===(n=r.content)||void 0===n?void 0:n.already_subscribed_message_text,h,f)}))},t.prototype.displayNoChannelsError=function(){var t=this;this.noChannelsErrorComponent&&s.StyleUtils.showElement(this.noChannelsErrorComponent),setTimeout((function(){t.noChannelsErrorComponent&&s.StyleUtils.hideElement(t.noChannelsErrorComponent)}),3e3)},t.prototype.destroyModal=function(){var t=this;this.modalComponent&&this.modalComponent.parentElement&&(this.modalComponent.parentElement.removeChild(this.modalComponent),b.getCloseIcon().removeEventListener("click",(function(){return t.destroyModal()})))},t.prototype.disableModal=function(){this.modalBox&&(this.modalBox.style.pointerEvents="none",this.modalBox.style.opacity="0.6")},t}(),R=function(){return(R=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},B=function(t,e){for(var n=0,o=e.length,i=t.length;n<o;n++,i++)t[i]=e[n];return t},D=function(){function t(t,e,n,o,i){void 0===i&&(i=!1),this.doesManualButtonExists=!1,this.shopConfig=t,this.product=e,this.injectionInfo=n,this.logger=o,this.needUnselectableFeature=i,this.shopLanguage=d(),this.unavailableVariants=this.getProductUnavailableVariants(),this.isDisplayModeInlineForm=this.determineIfDisplayModeIsInlineForm(),this.setGlobalStyles(),this.setContents(),this.createUiComponents()}return t.prototype.getProductUnavailableVariants=function(){var t,e,n=this;return null===(e=null===(t=this.product)||void 0===t?void 0:t.variants)||void 0===e?void 0:e.filter((function(t){var e,o,i;return!(null==t?void 0:t.available)||(null===(e=n.shopConfig)||void 0===e?void 0:e.pre_order_products_enabled)&&(null===(i=null===(o=n.shopConfig)||void 0===o?void 0:o.preorder_variant_ids)||void 0===i?void 0:i.includes(null==t?void 0:t.id))}))},t.prototype.determineIfDisplayModeIsInlineForm=function(){var t;return Boolean(s.UrlUtils.getQueryParameter("INLINE_DISPLAY_MODE",window.location.href))?s.UrlUtils.getQueryParameter("INLINE_DISPLAY_MODE",window.location.href)===r.FORM:(null===(t=this.injectionInfo)||void 0===t?void 0:t.inline_display_mode)===r.FORM},t.prototype.setGlobalStyles=function(){var t,e,n,o,i,r,s,l,a,u,c,d,p,h,f,v,m,y,g,C,b;this.globalStyles={buttonClasses:null!==(n=null===(e=null===(t=this.shopConfig.ui_style)||void 0===t?void 0:t.button_classes)||void 0===e?void 0:e.filter((function(t){return!t.includes(" ")})))&&void 0!==n?n:[],toastStyles:{backgroundColor:null!==(r=null===(i=null===(o=this.shopConfig.ui_style)||void 0===o?void 0:o.after_subscribe_message_styles)||void 0===i?void 0:i.toastBackgroundColor)&&void 0!==r?r:"0cd4a6",color:null!==(a=null===(l=null===(s=this.shopConfig.ui_style)||void 0===s?void 0:s.after_subscribe_message_styles)||void 0===l?void 0:l.toastColor)&&void 0!==a?a:"fff"},userStyles:{"background-color":"#"+(null===(c=null===(u=this.injectionInfo)||void 0===u?void 0:u.custom_styles)||void 0===c?void 0:c.backgroundColor),background:"#"+(null===(p=null===(d=this.injectionInfo)||void 0===d?void 0:d.custom_styles)||void 0===p?void 0:p.backgroundColor),border:(null===(f=null===(h=this.injectionInfo)||void 0===h?void 0:h.custom_styles)||void 0===f?void 0:f.borderSize)+"px solid #"+(null===(m=null===(v=this.injectionInfo)||void 0===v?void 0:v.custom_styles)||void 0===m?void 0:m.borderColor),"border-radius":(null===(g=null===(y=this.injectionInfo)||void 0===y?void 0:y.custom_styles)||void 0===g?void 0:g.borderRadius)+"px",color:"#"+(null===(b=null===(C=this.injectionInfo)||void 0===C?void 0:C.custom_styles)||void 0===b?void 0:b.color)}}},t.prototype.setContents=function(){var t,e,n,o,r=this,s=null===(e=null===(t=this.shopConfig)||void 0===t?void 0:t.ui_contents)||void 0===e?void 0:e.find((function(t){var e;return null!==(e=(null==t?void 0:t.language)===r.shopLanguage)&&void 0!==e?e:"en"}));s||(s=null===(n=this.shopConfig)||void 0===n?void 0:n.ui_contents[0]);var l=null===(o=null==s?void 0:s.notify_me_contents)||void 0===o?void 0:o.find((function(t){return(null==t?void 0:t.page)===i.PRODUCT})),a=this.needUnselectableFeature?null==l?void 0:l.not_selectable_variants_button_text:null==l?void 0:l.button_text;this.contents=R(R({},null==s?void 0:s.subscription_form_content),{notify_button_text:a})},t.prototype.createUiComponents=function(){this.doesManualButtonExists=this.checkIfManualButtonExists(),this.doesManualButtonExists||this.createNotifyMeButtonComponent(),this.createFloatButtonComponent(),this.addStyleAndClickListenerToButtonComponents(),this.isDisplayModeInlineForm&&this.createNotifyMeFormComponent()},t.prototype.checkIfManualButtonExists=function(){var t=document.getElementById("restock-"+this.product.handle);return!!t&&(this.logger.info("MANUAL NOTIFY BUTTON ADDED BY SHOP DEVELOPER"),this.notifyMeButtonComponent=t,!0)},t.prototype.createNotifyMeButtonComponent=function(){var t,e,n,o=this;this.notifyMeButtonComponent=s.ElementsUtils.createHtmlElement("button",null===(t=this.contents)||void 0===t?void 0:t.notify_button_text,B(["restock-alerts-notify-button",(null!==(n=null===(e=this.injectionInfo)||void 0===e?void 0:e.page)&&void 0!==n?n:"PRODUCT_PAGE")+"-notify-button","notifyButtonStyle"],this.globalStyles.buttonClasses)),this.notifyMeButtonComponent.setAttribute("type","button"),c.forEach((function(t){return o.notifyMeButtonComponent.classList.add(t)}))},t.prototype.createFloatButtonComponent=function(){var t,e=this;this.floatButtonComponent=s.ElementsUtils.createHtmlElement("button",null===(t=this.contents)||void 0===t?void 0:t.notify_button_text,B(["restock-alerts-float-button","floatButtonStyle"],this.globalStyles.buttonClasses)),c.forEach((function(t){return e.floatButtonComponent.classList.add(t)}))},t.prototype.addStyleAndClickListenerToButtonComponents=function(){var t=this;[this.notifyMeButtonComponent,this.floatButtonComponent].forEach((function(e){s.StyleUtils.applyInlineStyles(e,t.globalStyles.userStyles),t.needUnselectableFeature&&e.classList.add("restock-alerts-unselectable-variant-text"),e.addEventListener("click",(function(e){e.preventDefault(),t.displaySubscriptionModal()}))}))},t.prototype.displaySubscriptionModal=function(t){void 0===t&&(t=!1);var e=new N(this.shopConfig,this.product,this.unavailableVariants,this.contents,this.selectedVariantId,this.globalStyles);e.displayModal(),t&&e.showErrorComponent()},t.prototype.createNotifyMeFormComponent=function(){this.subscriptionFormInstance=new N(this.shopConfig,this.product,this.unavailableVariants,this.contents,this.selectedVariantId,this.globalStyles),this.notifyMeFormComponent=this.subscriptionFormInstance.createNotifyMeFormComponent(),s.StyleUtils.applyInlineStyles(this.notifyMeFormComponent,{"border-radius":"15px","margin-top":"15px"}),this.notifyMeFormComponent.style.border="1px solid #999",this.notifyMeFormComponent.style.padding="15px"},t.prototype.injectElements=function(t){var e,n;(null===(e=this.injectionInfo)||void 0===e?void 0:e.inline_display_mode)!==r.NOT_DISPLAYED&&this.injectInlineComponent(t),(null===(n=this.injectionInfo)||void 0===n?void 0:n.show_floating_button)&&document.body.appendChild(this.floatButtonComponent)},t.prototype.injectInlineComponent=function(t){var e,n,o,i;s.InjectionUtils.injectElements([this.isDisplayModeInlineForm?this.notifyMeFormComponent:this.notifyMeButtonComponent],B(B([],null!==(n=null===(e=this.injectionInfo)||void 0===e?void 0:e.wrapper)&&void 0!==n?n:[]),t),null===(o=this.injectionInfo)||void 0===o?void 0:o.prepend_to_wrapper,null===(i=this.injectionInfo)||void 0===i?void 0:i.inject_in_parent_of_wrapper)},t.prototype.setSelectedUnavailableVariantId=function(t){this.selectedVariantId=t,this.subscriptionFormInstance&&this.subscriptionFormInstance.setSelectedVariantId(t)},t.prototype.hideInjectedElements=function(){var t;s.StyleUtils.applyInlineStyles(this.notifyMeButtonComponent,{display:"none"}),(null===(t=this.injectionInfo)||void 0===t?void 0:t.show_floating_button)&&s.StyleUtils.applyInlineStyles(this.floatButtonComponent,{display:"none"}),this.isDisplayModeInlineForm&&s.StyleUtils.hideElement(this.notifyMeFormComponent)},t.prototype.showInjectedElements=function(){var t;s.StyleUtils.applyInlineStyles(this.notifyMeButtonComponent,{display:"block"}),this.isDisplayModeInlineForm&&s.StyleUtils.showElement(this.notifyMeFormComponent),(null===(t=this.injectionInfo)||void 0===t?void 0:t.show_floating_button)&&s.StyleUtils.applyInlineStyles(this.floatButtonComponent,{display:"block"})},t}(),M=Boolean(s.UrlUtils.getQueryParameter("RESTOCKIFY_LIVE_PREVIEW",window.location.href)),H=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),V=function(t){function e(e,n,o,i,r){var s=t.call(this,e,n,o,i,r)||this;return r&&s.logger.info("NOT SELECTABLE FEATURE HAS APPLIED TO THIS PRODUCT"),s.logger.info("DETECTED SHOP LANGUAGE: "+s.shopLanguage),M&&s.displayComponentsForLivePreview(),s.createProductPageStyles(),s.hideInjectedElements(),s.doesManualButtonExists||s.injectElements(f),s}return H(e,t),e.prototype.displayComponentsForLivePreview=function(){var t;C.injectAlert(null===(t=this.contents)||void 0===t?void 0:t.after_subscribe_message_text,null,null,!0),s.UrlUtils.getQueryParameter("SHOW_MODAL",window.location.href)&&this.displaySubscriptionModal(!0)},e.prototype.createProductPageStyles=function(){var t;this.productPageRawCss=s.ElementsUtils.createHtmlElement("style",null===(t=this.shopConfig.ui_style)||void 0===t?void 0:t.product_page_raw_css)},e.prototype.hideInjectedElements=function(){this.productPageRawCss&&this.productPageRawCss.parentElement&&this.productPageRawCss.parentElement.removeChild(this.productPageRawCss),t.prototype.hideInjectedElements.call(this)},e.prototype.showInjectedElements=function(){this.productPageRawCss&&document.head.appendChild(this.productPageRawCss),t.prototype.showInjectedElements.call(this)},e}(D),F=function(){function t(){}return t.addUrlChangeListener=function(t,e,n,o){var i,r,s,l;void 0===o&&(o=200),console.log(e);var a=!1;setInterval((function(){var o=new URLSearchParams(window.location.search),u=document.querySelector('[name="id"]');s=o.get(t),u&&(l=u.value),s&&s!==r?(a=!0,r=s,n(s)):!l||l===i||a||e||(i=l,n(l))}),o)},t}(),G=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))},q=function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}},W=function(t,e){for(var n=0,o=e.length,i=t.length;n<o;n++,i++)t[i]=e[n];return t},z=function(){function t(){}return t.fetchProduct=function(e){return G(this,void 0,void 0,(function(){return q(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,h.a.get(t.baseUrl+"/products/"+e+".js")];case 1:return[2,n.sent().data];case 2:return n.sent(),[2,{}];case 3:return[2]}}))}))},t.fetchCollectionUnavailableProducts=function(e,n,o,i){return void 0===i&&(i=!1),G(this,void 0,void 0,(function(){var r,s;return q(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,Promise.all(o.map((function(e){return h.a.get(t.baseUrl+"/products/"+e+".js").catch((function(){return null}))})))];case 1:return r=l.sent(),[2,t.filterUnavailableProducts(e,r.filter((function(t){return t})).map((function(t){return t.data})),i)];case 2:return s=l.sent(),n.warn("SHOPIFY API ERROR FOR FETCHING EACH HANDLE: "+s),[2,t.fetchCollectionUnavailableProductsServerInjected(e,n,i)];case 3:return[2]}}))}))},t.fetchCollectionUnavailableProductsServerInjected=function(e,n,o){var i,r,s;return void 0===o&&(o=!1),G(this,void 0,void 0,(function(){var l,a;return q(this,(function(u){if(null===(i=null==e?void 0:e.collection_page_products)||void 0===i?void 0:i.length){l=Boolean(sessionStorage.getItem("collection_products"))?JSON.parse(sessionStorage.getItem("collection_products")):[],a=null==l?void 0:l.map((function(t){return null==t?void 0:t.id}));try{return(null===(r=null==e?void 0:e.collection_page_products)||void 0===r?void 0:r.length)&&!a.includes(null===(s=null==e?void 0:e.collection_page_products[0])||void 0===s?void 0:s.id)&&(l=W(W([],l),null==e?void 0:e.collection_page_products),sessionStorage.setItem("collection_products",JSON.stringify(l))),[2,t.filterUnavailableProducts(e,l,o)]}catch(t){n.warn("Browser storage is full and can not store collection products")}}return t.fetchCollectionUnavailableProductsLegacy(e,n,o),[2]}))}))},t.fetchCollectionUnavailableProductsLegacy=function(e,n,o){return void 0===o&&(o=!1),G(this,void 0,void 0,(function(){var i,r,s,l;return q(this,(function(a){switch(a.label){case 0:i=(null==e?void 0:e.products_count)||1e3,r=new Array(Math.ceil(i/250)).fill("page"),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.all(r.map((function(e,n){return h.a.get(t.baseUrl+"/products.json?limit=250&page="+(n+1))})))];case 2:return s=a.sent(),[2,t.filterUnavailableProducts(e,s.reduce((function(t,e){var n;return W(W([],t),null===(n=e.data)||void 0===n?void 0:n.products)}),[]),o)];case 3:return l=a.sent(),n.error("SHOPIFY API ERROR: "+l),[2,[]];case 4:return[2]}}))}))},t.filterUnavailableProducts=function(t,e,n){return void 0===n&&(n=!1),G(this,void 0,void 0,(function(){return q(this,(function(o){return[2,e.filter((function(e){var o,i;return n?null===(o=null==e?void 0:e.variants)||void 0===o?void 0:o.some((function(e){var n;return!(null==e?void 0:e.available)||(null==t?void 0:t.pre_order_products_enabled)&&(null===(n=null==t?void 0:t.preorder_variant_ids)||void 0===n?void 0:n.includes(null==e?void 0:e.id))})):null===(i=null==e?void 0:e.variants)||void 0===i?void 0:i.every((function(e){var n;return!(null==e?void 0:e.available)||(null==t?void 0:t.pre_order_products_enabled)&&(null===(n=null==t?void 0:t.preorder_variant_ids)||void 0===n?void 0:n.includes(null==e?void 0:e.id))}))}))]}))}))},t.baseUrl=s.UrlUtils.getBaseURL(),t}(),Y=function(t,e){var n=t.element,o=t.property,i=t.is_dataset_property,r=document.querySelector(n),s=i?r.dataset[o]:r.getAttribute(o);e(s),setInterval((function(){var t=i?r.dataset[o]:r.getAttribute(o);s!==t&&(s=t,e(t))}),200)},$=function(){function t(t,e){var n,o=this;this.injectionInfo=null===(n=null==t?void 0:t.ui_style)||void 0===n?void 0:n.product_page_notify_me_style,this.logger=e,this.shopConfig=t;var i=!s.UrlUtils.isProductPage()&&!s.UrlUtils.isCollectionPage()&&window.location.href.includes("unitedse7en.com");(s.UrlUtils.isProductPage()||i)&&(this.logger.info("SINGLE PRODUCT "+(i?"IN HOME ":"")+"PAGE DETECTED"),t.developer_mode_variant_listener&&this.createDeveloperModeVariantListenerElement(),i?z.fetchCollectionUnavailableProductsServerInjected(this.shopConfig,this.logger,!0).then((function(t){var e;o.product=null===(e=t.filter((function(t){return"cuban-link-chain"===(null==t?void 0:t.handle)})))||void 0===e?void 0:e[0],o.start()})):(this.product=this.shopConfig.product,this.start()))}return t.prototype.start=function(){var t,e,n,o,i,l,a,u,c,d,p,h,f,v,m,y,g,C=this;if((null===(t=this.injectionInfo)||void 0===t?void 0:t.inline_display_mode)===r.NOT_DISPLAYED&&!(null===(e=this.injectionInfo)||void 0===e?void 0:e.show_floating_button))return this.logger.warn("PRODUCT PAGE FEATURE IS DISABLED.");if((null===(o=null===(n=this.shopConfig)||void 0===n?void 0:n.hidden_btn_products_handles)||void 0===o?void 0:o.includes(null===(i=this.product)||void 0===i?void 0:i.handle))||this.shopConfig.disable_button)return this.logger.warn("BUTTON HAS BEEN DISABLED BY "+(this.shopConfig.disable_button?"SHOP DEVELOPER":"hide-notify-btn TAG"));this.unavailableVariants=null===(a=null===(l=this.product)||void 0===l?void 0:l.variants)||void 0===a?void 0:a.filter((function(t){var e,n,o;return!(null==t?void 0:t.available)||(null===(e=C.shopConfig)||void 0===e?void 0:e.pre_order_products_enabled)&&(null===(o=null===(n=C.shopConfig)||void 0===n?void 0:n.preorder_variant_ids)||void 0===o?void 0:o.includes(null==t?void 0:t.id))}));var b=(null===(c=null===(u=this.product)||void 0===u?void 0:u.variants)||void 0===c?void 0:c.length)>1,E=!!(null===(d=this.shopConfig)||void 0===d?void 0:d.not_selectable_variants_enabled)&&this.unavailableVariants.length>0&&b;this.allVariantsAreOutOfStock=b&&this.unavailableVariants.length===this.product.variants.length,this.uiInstance=new V(this.shopConfig,this.product,this.injectionInfo,this.logger,E);var w=!(null===(p=this.shopConfig)||void 0===p?void 0:p.not_selectable_variants_enabled)&&b,S=s.UrlUtils.getQueryParameter("SHOW_MODAL",window.location.href);w&&!S?((!(null===(h=this.product)||void 0===h?void 0:h.available)||this.unavailableVariants.length&&this.unavailableVariants.every((function(t){var e,n;return null===(n=null===(e=C.shopConfig)||void 0===e?void 0:e.preorder_variant_ids)||void 0===n?void 0:n.includes(t.id)}))||M)&&this.showInjectedElements("PRODUCT"),this.setVariantListener()):(!(null===(f=this.product)||void 0===f?void 0:f.available)||E||!b&&(null===(v=this.shopConfig)||void 0===v?void 0:v.pre_order_products_enabled)&&(null===(y=null===(m=this.shopConfig)||void 0===m?void 0:m.preorder_variant_ids)||void 0===y?void 0:y.includes(null===(g=this.unavailableVariants[0])||void 0===g?void 0:g.id))||S||M)&&this.showInjectedElements("PRODUCT")},t.prototype.setVariantListener=function(){var t,e,n,o=this;(null===(e=null===(t=this.injectionInfo)||void 0===t?void 0:t.custom_variant_listener)||void 0===e?void 0:e.element)?(this.logger.info("SETTING CUSTOM VARIANT LISTENER..."),Y(null===(n=this.injectionInfo)||void 0===n?void 0:n.custom_variant_listener,(function(t){return o.onVariantChange(t)}))):this.shopConfig.developer_mode_variant_listener?(this.logger.info("SETTING DEVELOPER MODE VARIANT LISTENER..."),Y({element:"#restock-variant-change",property:"value"},(function(t){return o.onVariantChange(t)}))):(this.logger.info("SETTING GENERAL VARIANT LISTENER..."),F.addUrlChangeListener("variant",this.allVariantsAreOutOfStock,(function(t){return o.onVariantChange(t)})))},t.prototype.onVariantChange=function(t){var e;this.logger.info("SELECTED VARIANT ID: "+t),(null===(e=this.unavailableVariants)||void 0===e?void 0:e.map((function(t){return null==t?void 0:t.id})).includes(parseInt(t)))?(this.uiInstance.setSelectedUnavailableVariantId(t.toString()),this.showInjectedElements("VARIANT")):this.uiInstance.hideInjectedElements()},t.prototype.showInjectedElements=function(t){this.logger.info("THE "+t+" IS UNAVAILABLE"),this.uiInstance.showInjectedElements()},t.prototype.createDeveloperModeVariantListenerElement=function(){var t=s.ElementsUtils.createInputElement("hidden");t.setAttribute("id","restock-variant-change"),document.body.appendChild(t),setTimeout((function(){t.setAttribute("value","hello")}),5e3)},t}(),K=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Q=function(t){function e(e,n,o,i){var r=t.call(this,e,n,o,i)||this;return r.areComponentsInjected=!1,r.hideInjectedElements(),r.injectElements(),r}return K(e,t),e.prototype.injectElements=function(){var t,e,n=!1,o=!1;this.areComponentsInjected||this.doesManualButtonExists||((null===(e=null===(t=this.injectionInfo)||void 0===t?void 0:t.wrapper)||void 0===e?void 0:e.length)&&(n=this.injectToCustomWrappers()),n||(o=this.injectToGeneralWrappers()),(o||n)&&(this.areComponentsInjected=!0))},e.prototype.injectToCustomWrappers=function(){var t,e,n;return C.injectElementsToCollectionPagesCustomWrappers([this.isDisplayModeInlineForm?this.notifyMeFormComponent:this.notifyMeButtonComponent],null===(t=this.injectionInfo)||void 0===t?void 0:t.wrapper,this.product.handle,null===(e=this.injectionInfo)||void 0===e?void 0:e.prepend_to_wrapper,null===(n=this.injectionInfo)||void 0===n?void 0:n.inject_in_parent_of_wrapper)},e.prototype.injectToGeneralWrappers=function(){return C.injectElementsToCollectionPagesDefaultWrapper([this.isDisplayModeInlineForm?this.notifyMeFormComponent:this.notifyMeButtonComponent],['a[href*="'+this.product.handle+'"]'],this.product.handle)},e}(D),J=function(t,e){for(var n=0,o=e.length,i=t.length;n<o;n++,i++)t[i]=e[n];return t},X=function(){function t(t,e){var n,o,l,a,u=this;this.liveChangeListenerIsSet=!1,this.uiInstances=[],this.shopConfig=t,this.logger=e;var c=s.UrlUtils.isHomePage()&&window.location.href.includes("unitedse7en.com");if((s.UrlUtils.isCollectionPage()||s.UrlUtils.isHomePage())&&!c&&!s.UrlUtils.isProductPage()){if(this.serviceName=s.UrlUtils.isCollectionPage()?i.COLLECTION:i.LANDING,this.injectionInfo=null===(l=null===(o=null===(n=this.shopConfig)||void 0===n?void 0:n.ui_style)||void 0===o?void 0:o.notify_me_styles)||void 0===l?void 0:l.find((function(t){return(null==t?void 0:t.page)===u.serviceName})),this.logger.info(this.injectionInfo.page+" DETECTED!"),(null===(a=this.injectionInfo)||void 0===a?void 0:a.inline_display_mode)===r.NOT_DISPLAYED)return this.logger.warn(this.injectionInfo.page+" FEATURE IS DISABLED.");if(this.shopConfig.disable_button)return this.logger.warn("BUTTON HAS BEEN DISABLED BY SHOP DEVELOPER");this.productHandlesInCurrentView=this.getProductHandlesInCurrentview(),this.fetchUnavailableProductsAndCreateUi(this.productHandlesInCurrentView)}}return t.prototype.getProductHandlesInCurrentview=function(){return Array.from(document.querySelectorAll('a[href*="/products/"]')).reduce((function(t,e){var n=C.getLastSegmentOfUrl(e.href);return t.includes(n)?t:J(J([],t),[n])}),[])},t.prototype.fetchUnavailableProductsAndCreateUi=function(t){var e=this;z.fetchCollectionUnavailableProducts(this.shopConfig,this.logger,t).then((function(t){e.unavailableProducts=t,e.createUiComponents()}))},t.prototype.createUiComponents=function(){var t=this;this.unavailableProducts.filter((function(e){var n,o;return!(null===(o=null===(n=t.shopConfig)||void 0===n?void 0:n.hidden_btn_products_handles)||void 0===o?void 0:o.includes(null==e?void 0:e.handle))})).forEach((function(e){var n=new Q(t.shopConfig,e,t.injectionInfo,t.logger);n.showInjectedElements(),t.uiInstances.push(n)})),s.UrlUtils.isCollectionPage()&&!this.liveChangeListenerIsSet&&this.addHyperLinkCountChangeListener()},t.prototype.addHyperLinkCountChangeListener=function(){var t=this;this.liveChangeListenerIsSet=!0;var e=document.querySelectorAll("a");this.prevHyperlinksCount=e.length,setInterval((function(){var e,n=document.querySelectorAll("a");if(n.length!==t.prevHyperlinksCount){t.prevHyperlinksCount=n.length;var o=t.getProductHandlesInCurrentview();o.includes(null===(e=t.productHandlesInCurrentView)||void 0===e?void 0:e[0])?(t.fetchUnavailableProductsAndCreateUi(o.filter((function(e){return!t.productHandlesInCurrentView.includes(e)}))),t.productHandlesInCurrentView=J(J([],t.productHandlesInCurrentView),o)):(t.fetchUnavailableProductsAndCreateUi(o),t.productHandlesInCurrentView=o)}}),200)},t}(),Z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tt=function(){return(tt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},et=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{a(o.next(t))}catch(t){r(t)}}function l(t){try{a(o.throw(t))}catch(t){r(t)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,l)}a((o=o.apply(t,e||[])).next())}))},nt=function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(r){return function(l){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(t){r=[6,t],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,l])}}};new(function(t){function e(){var e=t.call(this,"Restock Alerts")||this;e.services=[$,X],M&&C.injectOverlay(),"localStorage"in window&&localStorage.getItem("hengam-logs")&&e.logger.enableLogs();var n="restock-alerts".replace("-","")+"Status";return"loaded"===document.documentElement.dataset[n]?e.logger.info("SDK LOADED ONCE BEFORE"):(document.documentElement.dataset[n]="loaded",b.createIcons(),T.fetchResources(),e.fetchShopConfig().then((function(t){var n,o,i;if(e.shopConfig=t,g.initialize(null===(n=e.shopConfig)||void 0===n?void 0:n.shop_id),e.initializePushe(),(null===(o=e.shopConfig)||void 0===o?void 0:o.shop_id)||e.logger.warn("SHOP ID DOES NOT EXIST IN SERVER INJECTED CONFIG"),!(null===(i=e.shopConfig)||void 0===i?void 0:i.app_enabled))return e.logger.error("THE APP HAS BEEN DEACTIVATED BY SHOP OWNER");e.injectStyles(),e.logger.info("LATEST RELEASE: Wed, 17 Aug 2022 12:07:11 GMT"),e.logger.info("STARTING APP..."),e.services.forEach((function(t){return new t(e.shopConfig,e.logger)}))})),e)}return Z(e,t),e.prototype.fetchShopConfig=function(){var t;return et(this,void 0,void 0,(function(){var e,n,i,r,l,a,u,c;return nt(this,(function(d){switch(d.label){case 0:e=s.UrlUtils.getQueryParameter("SHOP_DOMAIN",window.location.href),n=e||L(),d.label=1;case 1:return d.trys.push([1,3,,4]),[4,g.getShopConfig(n)];case 2:return i=d.sent(),r=o.RESTOCK_ALERTS,l=r in window?window[r]:{},s.UrlUtils.isProductPage()&&!Boolean("product"in l)?(a=i.data,u=C.getLastSegmentOfUrl(window.location.href),[2,z.fetchProduct(u).then((function(t){return tt(tt(tt({},a),l),{product:t})}))]):[2,tt(tt({},i.data),l)];case 3:return c=d.sent(),this.logger.error("FETCH SHOP CONFIG ERROR: "+(null===(t=null==c?void 0:c.response)||void 0===t?void 0:t.data)),[3,4];case 4:return[2]}}))}))},e.prototype.initializePushe=function(){var t=this,e=0,n=setInterval((function(){"Bestpush"in window?(window.Bestpush.init(t.shopConfig.pushe_app_id,{serviceWorkerPath:"/apps/webpush/bestpushweb-sw.js"}),clearInterval(n)):e++,e>30&&(t.logger.warn("COULD NOT FIND PUSHE SDK"),clearInterval(n))}),100)},e.prototype.injectStyles=function(){var t,e;s.InjectionUtils.injectLinkedStylesheet("https://cdn.hengam.io/restock/styles.css"),M||s.InjectionUtils.injectRawStyle(null===(e=null===(t=this.shopConfig)||void 0===t?void 0:t.ui_style)||void 0===e?void 0:e.global_raw_css)},e}(l.a))}]);